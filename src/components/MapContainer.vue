<template>
  <div>
    <div id="container">
      <div class="input-card">
        <span>左击获取经纬度：</span>

        <div class="input-item">
          <input type="text" readonly="true" id="lnglat" />
        </div>
      </div>
    </div>
  </div>
</template>
<script>
import AMapLoader from "@amap/amap-jsapi-loader";
import {ColorMaker} from '@/assets/js/color'
export default {
  name: "map-view",
  data() {
    return {
      curGeoJsonData: {},
      map: {},
      strokeColor: "#2b8cbe",
      fillColor: "#ccebc5",
      fillOpacity: 0.5,
    };
  },
  mounted() {
    this.initAMap();
  },
  unmounted() {
    this.map?.destroy();
  },
  methods: {
    initAMap() {
      AMapLoader.load({
        key: "ad2dfe4e1ccb52f472216a6563e695d0", // 申请好的Web端开发者Key，首次调用 load 时必填
        version: "2.0", // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15
        plugins: ["AMap.Scale"], //需要使用的的插件列表，如比例尺'AMap.Scale'，支持添加多个如：['...','...']
      })
        .then((AMap) => {
          this.map = new AMap.Map("container", {
            // 设置地图容器id
            viewMode: "3D", // 是否为3D地图模式
            zoom: 15, // 初始化地图级别
            layers: [new AMap.TileLayer.Satellite()],
            center: [114.53401565551758, 30.519089756902368], // 初始化地图中心点位置
          });
          this.getGrids();
        })
        .catch((e) => {
          console.log(e);
        });
    },

    // 获取所有网格
    getGrids() {
      // this.$http
      //   .request({
      //     url: "/rbac/admin/org/info/findOrgListByLevel",
      //     method: "POST",
      //     data: {
      //       orgLevel: 6,
      //       pageSize: -1,
      //       pageNo: 1,
      //     },
      //   })
      //   .then((res) => {
      // console.log(res);
      // this.curGeoJsonData=res.content.list
      this.curGeoJsonData = {
        type: "FeatureCollection",
        features: [
          {
            type: "Feature",
            geometry: {
              type: "Point",
              coordinates: [114.53401565551758, 30.519089756902368],
            },
          },
          {
            type: "Feature",
            geometry: {
              type: "LineString",
              coordinates: [
                [114.55461502075195, 30.549917722771724],
                [114.54920768737792, 30.55235692815154],
                [114.55023765563965, 30.55656995670823],
                [114.5554733276367, 30.557161244326906],
              ],
            },
          },
          {
            type: "Feature",
            geometry: {
              type: "Polygon",
              coordinates: [
                [
                  [114.37387704849243, 30.50043667675731],
                  [114.37153816223145, 30.497349052760757],
                  [114.36570167541502, 30.496831357706732],
                  [114.3651008605957, 30.49520429817281],
                  [114.36750411987305, 30.493577211427127],
                  [114.36793327331543, 30.49135841292176],
                  [114.36690330505371, 30.490544840792403],
                  [114.36638832092284, 30.489213526271655],
                  [114.36758995056152, 30.488473899223166],
                  [114.37299728393555, 30.489361451006754],
                  [114.37394142150877, 30.490470879352443],
                  [114.38072204589844, 30.491506334396256],
                  [114.38355445861816, 30.491876137098675],
                  [114.3856143951416, 30.49084068599015],
                  [114.38578605651854, 30.48640291358106],
                  [114.38261032104492, 30.484701713834557],
                  [114.3830394744873, 30.48181700282728],
                  [114.37110900878906, 30.48322238553631],
                  [114.37085151672363, 30.478562354439717],
                  [114.37239646911621, 30.4773788189566],
                  [114.37188148498535, 30.47604732433992],
                  [114.37256813049316, 30.474937731582706],
                  [114.37196731567381, 30.474050048272446],
                  [114.36750411987305, 30.473384280478854],
                  [114.36475753784178, 30.468057974259104],
                  [114.36304092407227, 30.454518968227855],
                  [114.36372756958006, 30.450375508446697],
                  [114.37273979187012, 30.44756377469645],
                  [114.37891960144043, 30.4473417922616],
                  [114.37840461730957, 30.445861896443546],
                  [114.36123847961426, 30.443050032491644],
                  [114.36158180236816, 30.439350087938205],
                  [114.3728256225586, 30.440238087436313],
                  [114.37548637390137, 30.435353990118514],
                  [114.38664436340332, 30.436242026008326],
                  [114.40441131591797, 30.449598590125614],
                  [114.41320896148682, 30.45105993136033],
                  [114.41097736358643, 30.444973948168244],
                  [114.41574096679688, 30.445380925465095],
                  [114.42857265472412, 30.442846539190143],
                  [114.4352674484253, 30.436908047618758],
                  [114.44307804107666, 30.436871046537505],
                  [114.44754123687744, 30.431542744268654],
                  [114.44088935852051, 30.429063504398034],
                  [114.43960189819336, 30.423290701727836],
                  [114.44131851196289, 30.42195846798623],
                  [114.42964553833008, 30.408709153751015],
                  [114.43857192993164, 30.402639034841165],
                  [114.45350646972655, 30.413372525330324],
                  [114.46629524230957, 30.412558301901793],
                  [114.48341846466063, 30.416407298270315],
                  [114.4974946975708, 30.42695425071985],
                  [114.49127197265625, 30.434428944134165],
                  [114.47874069213867, 30.42854544631636],
                  [114.47573661804199, 30.433207869999436],
                  [114.47565078735352, 30.450227524482063],
                  [114.4844913482666, 30.45030151649247],
                  [114.48363304138184, 30.458958193920978],
                  [114.47556495666502, 30.45991999949615],
                  [114.47547912597656, 30.47360620358249],
                  [114.4442367553711, 30.47160887744136],
                  [114.45144653320312, 30.479080146689128],
                  [114.45144653320312, 30.48817804682973],
                  [114.4525623321533, 30.50208213693682],
                  [114.45556640625, 30.502230042106245],
                  [114.45831298828125, 30.49912398631594],
                  [114.46492195129395, 30.49905003139772],
                  [114.46927785873412, 30.501582955329475],
                  [114.46575880050659, 30.506223396658257],
                  [114.46578025817871, 30.511769450387007],
                  [114.45432186126709, 30.51287862317139],
                  [114.4431209564209, 30.512471927953097],
                  [114.43204879760742, 30.507628426854378],
                  [114.41831588745116, 30.508811594431336],
                  [114.41698551177979, 30.498495367719055],
                  [114.3866229057312, 30.500547607532138],
                  [114.3796706199646, 30.50439312950967],
                  [114.37819004058836, 30.498624789526968],
                  [114.37387704849243, 30.50043667675731],
                ],
              ],
            },
          },
          {
            type: "Feature",
            geometry: {
              type: "Polygon",
              coordinates: [
                [
                  [114.37778234481812, 30.50570574883702],
                  [114.3865156173706, 30.500750980290693],
                  [114.39260959625244, 30.500307257360134],
                  [114.4166851043701, 30.498606300707802],
                  [114.41840171813965, 30.50888554192688],
                  [114.43063259124756, 30.507850271871686],
                  [114.42962408065796, 30.51156610067058],
                  [114.43243503570557, 30.51583635539623],
                  [114.4269847869873, 30.520198846162508],
                  [114.42217826843262, 30.520568539770043],
                  [114.40402507781982, 30.521529736568425],
                  [114.40179347991943, 30.522453955294118],
                  [114.40162181854248, 30.517925199558253],
                  [114.39941167831421, 30.51759246632573],
                  [114.39505577087402, 30.51738912878958],
                  [114.39415454864502, 30.512508900315954],
                  [114.39093589782715, 30.512434955576172],
                  [114.38621520996094, 30.51446841542766],
                  [114.3797779083252, 30.51905278704238],
                  [114.38009977340698, 30.51774034790302],
                  [114.37778234481812, 30.50570574883702],
                ],
              ],
            },
          },
          {
            type: "Feature",
            geometry: {
              type: "Polygon",
              coordinates: [
                [
                  [114.58105087280273, 30.51657577439133],
                  [114.58079338073729, 30.514875102293914],
                  [114.59366798400877, 30.50844185611006],
                  [114.5976161956787, 30.497127183789242],
                  [114.59847450256348, 30.48862182508258],
                  [114.6379566192627, 30.491580295049193],
                  [114.63203430175781, 30.502008184267762],
                  [114.63272094726562, 30.509920800959517],
                  [114.63173389434813, 30.519533394125148],
                  [114.62825775146484, 30.534652818668675],
                  [114.6264123916626, 30.5425258170536],
                  [114.62482452392578, 30.54829155180099],
                  [114.62027549743652, 30.548624179897452],
                  [114.62023258209229, 30.551174290773453],
                  [114.6122932434082, 30.552098227456284],
                  [114.60263729095459, 30.55553519470698],
                  [114.60057735443115, 30.552467799666985],
                  [114.60371017456056, 30.55139603637937],
                  [114.6058988571167, 30.55091558692632],
                  [114.60486888885497, 30.54973293198783],
                  [114.6036672592163, 30.55043513509528],
                  [114.60246562957764, 30.547663251176015],
                  [114.60096359252928, 30.54566744574838],
                  [114.60040569305421, 30.54855026264117],
                  [114.59753036499022, 30.549954680886305],
                  [114.59555625915526, 30.545852244270765],
                  [114.59040641784668, 30.540234212012688],
                  [114.58783149719238, 30.52855357843757],
                  [114.59014892578125, 30.525670167943172],
                  [114.58697319030762, 30.526779182105784],
                  [114.58105087280273, 30.51657577439133],
                ],
              ],
            },
          },
          {
            type: "Feature",
            geometry: {
              type: "Polygon",
              coordinates: [
                [
                  [114.53206300735474, 30.51884945256119],
                  [114.53401565551758, 30.519089756902368],
                  [114.53641891479491, 30.531880484216792],
                  [114.52560424804688, 30.53587262076145],
                  [114.52680587768555, 30.53757292539208],
                  [114.53152656555176, 30.53735114821524],
                  [114.53058242797852, 30.54097344535385],
                  [114.53315734863281, 30.540382059131083],
                  [114.53478813171387, 30.537794702062474],
                  [114.55384254455565, 30.54163875054966],
                  [114.55942153930663, 30.546961028018526],
                  [114.55573081970215, 30.55124820603171],
                  [114.55461502075195, 30.549917722771724],
                  [114.54920768737792, 30.55235692815154],
                  [114.55023765563965, 30.55656995670823],
                  [114.5554733276367, 30.557161244326906],
                  [114.56165313720703, 30.55620040011713],
                  [114.56568717956543, 30.54481736801511],
                  [114.56182479858398, 30.541934440284663],
                  [114.55967903137207, 30.54030813560003],
                  [114.56319808959961, 30.53380264451493],
                  [114.56130981445312, 30.536907592342374],
                  [114.56233978271483, 30.537203296482698],
                  [114.56216812133789, 30.540677752692655],
                  [114.56568717956543, 30.540234212012688],
                  [114.56568717956543, 30.538238253884025],
                  [114.56628799438475, 30.53542905813647],
                  [114.56680297851562, 30.537425073997134],
                  [114.56766128540039, 30.536685813646297],
                  [114.56766128540039, 30.53328514356082],
                  [114.5694637298584, 30.53631618136082],
                  [114.57255363464354, 30.537425073997134],
                  [114.57092285156249, 30.538607878854556],
                  [114.57152366638184, 30.540086364669186],
                  [114.57263946533203, 30.539494973044338],
                  [114.57366943359375, 30.537794702062474],
                  [114.57804679870605, 30.536242254734933],
                  [114.576416015625, 30.53794255289474],
                  [114.5775318145752, 30.539642821288165],
                  [114.57959175109863, 30.538829653161645],
                  [114.57796096801758, 30.54045598260588],
                  [114.58130836486816, 30.542895425705265],
                  [114.58096504211426, 30.539642821288165],
                  [114.58662986755371, 30.543782480729263],
                  [114.58954811096191, 30.54163875054966],
                  [114.58379745483398, 30.540160288369066],
                  [114.58345413208008, 30.538386104041045],
                  [114.58800315856932, 30.538903577818132],
                  [114.58362579345703, 30.535724766778195],
                  [114.58379745483398, 30.533137285638997],
                  [114.58800315856932, 30.532619781140244],
                  [114.58946228027344, 30.538977502418366],
                  [114.60237979888917, 30.555719974444933],
                  [114.59220886230469, 30.55989590270129],
                  [114.58027839660645, 30.57220091164766],
                  [114.56534385681151, 30.561928369136037],
                  [114.54955101013182, 30.56178055483084],
                  [114.54774856567383, 30.554574334398687],
                  [114.52886581420898, 30.56196532267716],
                  [114.52826499938965, 30.565882318221018],
                  [114.5165491104126, 30.569023190961683],
                  [114.51603412628174, 30.568025512994446],
                  [114.50727939605713, 30.568505877741032],
                  [114.50796604156494, 30.571129366306103],
                  [114.50483322143553, 30.57116631634256],
                  [114.50431823730469, 30.57260735678382],
                  [114.50371742248535, 30.57353108939511],
                  [114.50032711029053, 30.572311760490074],
                  [114.4998550415039, 30.572422609205802],
                  [114.50037002563477, 30.573272445150806],
                  [114.49818134307861, 30.574898197513576],
                  [114.49779510498047, 30.574565659474697],
                  [114.49788093566895, 30.57386363098143],
                  [114.49646472930908, 30.57245955874955],
                  [114.49341773986816, 30.57220091164766],
                  [114.49208736419678, 30.571388016265534],
                  [114.4914436340332, 30.570057809126446],
                  [114.49225902557373, 30.566214886030803],
                  [114.49045658111572, 30.56577146203109],
                  [114.488525390625, 30.569392698715927],
                  [114.48985576629639, 30.57249650827923],
                  [114.48715209960938, 30.573457191109977],
                  [114.48676586151123, 30.57305074953525],
                  [114.48732376098633, 30.572016163295416],
                  [114.48646545410156, 30.5704642632433],
                  [114.4856071472168, 30.570131710001625],
                  [114.48286056518555, 30.5704642632433],
                  [114.47972774505615, 30.569688303905835],
                  [114.47912693023682, 30.568062464213256],
                  [114.47818279266356, 30.567988561761567],
                  [114.47745323181152, 30.565438892701227],
                  [114.47985649108885, 30.563369546810804],
                  [114.47994232177734, 30.56118929535822],
                  [114.48118686676025, 30.559637222101106],
                  [114.48088645935059, 30.558269898901884],
                  [114.48243141174315, 30.555867797981985],
                  [114.48230266571045, 30.55342868082946],
                  [114.48380470275879, 30.55132212123368],
                  [114.4847059249878, 30.5515438665019],
                  [114.48693752288818, 30.550546008805814],
                  [114.48831081390381, 30.551654738946063],
                  [114.4896411895752, 30.550250345296313],
                  [114.48698043823242, 30.548845931328568],
                  [114.4857358932495, 30.546776231606575],
                  [114.48732376098633, 30.542156206995088],
                  [114.4868516921997, 30.538718766071405],
                  [114.48328971862793, 30.538386104041045],
                  [114.47977066040039, 30.54204532370317],
                  [114.4808006286621, 30.547034946484814],
                  [114.47779655456543, 30.548069799103555],
                  [114.47736740112305, 30.547145824078733],
                  [114.4762086868286, 30.54755237417302],
                  [114.47509288787842, 30.545889203933005],
                  [114.47380542755127, 30.54045598260588],
                  [114.47273254394531, 30.540677752692655],
                  [114.47277545928955, 30.538570916420806],
                  [114.49831008911133, 30.53631618136082],
                  [114.52435970306396, 30.531252077408237],
                  [114.5253038406372, 30.52881234186186],
                  [114.52092647552489, 30.526816149026534],
                  [114.52006816864014, 30.52101217024287],
                  [114.5246171951294, 30.51945945472862],
                  [114.53206300735474, 30.51884945256119],
                ],
              ],
            },
          },
          {
            type: "Feature",
            geometry: {
              type: "Polygon",
              coordinates: [
                [
                  [114.46586608886719, 30.511769450387007],
                  [114.46586608886719, 30.506371295529622],
                  [114.47324752807616, 30.49594387406164],
                  [114.48509216308592, 30.501231677847798],
                  [114.48835372924803, 30.496017831341284],
                  [114.49736595153809, 30.4954261715298],
                  [114.50770854949951, 30.49657250914657],
                  [114.52071189880371, 30.50149051400995],
                  [114.53598976135254, 30.50844185611006],
                  [114.53534603118896, 30.510105667483998],
                  [114.53577518463135, 30.510623291882613],
                  [114.53242778778075, 30.518424297271395],
                  [114.52474594116211, 30.518867937531603],
                  [114.51719284057617, 30.521677612155177],
                  [114.50637817382812, 30.5217145810167],
                  [114.50277328491211, 30.52060550905346],
                  [114.49779510498047, 30.51982915114868],
                  [114.49616432189941, 30.51846126737041],
                  [114.49625015258788, 30.516206065596847],
                  [114.49430823326111, 30.513313045729845],
                  [114.4755220413208, 30.5077393494263],
                  [114.46990013122559, 30.50870067308258],
                  [114.4668960571289, 30.51128880491729],
                  [114.46608066558838, 30.511621559726336],
                  [114.46586608886719, 30.511769450387007],
                ],
              ],
            },
          },
          {
            type: "Feature",
            geometry: {
              type: "Polygon",
              coordinates: [
                [
                  [114.52255725860594, 30.491099549800282],
                  [114.52195644378662, 30.47871029536343],
                  [114.5150899887085, 30.478562354439717],
                  [114.51736450195312, 30.47157188953386],
                  [114.52869415283203, 30.472311645014344],
                  [114.52882289886473, 30.459069171971926],
                  [114.50551986694336, 30.45192932650929],
                  [114.50809478759764, 30.442606046558932],
                  [114.4911003112793, 30.434761961699344],
                  [114.50225830078125, 30.42010811316847],
                  [114.53968048095702, 30.435205983350652],
                  [114.54586029052734, 30.452669231165242],
                  [114.56628799438475, 30.460215937762882],
                  [114.56920623779297, 30.46450694160794],
                  [114.54676151275635, 30.49146935404873],
                  [114.52255725860594, 30.491099549800282],
                ],
              ],
            },
          },
          {
            type: "Feature",
            geometry: {
              type: "Polygon",
              coordinates: [
                [
                  [114.4525623321533, 30.50208213693682],
                  [114.45157527923583, 30.487734266553137],
                  [114.45526599884033, 30.48736444811005],
                  [114.47577953338623, 30.48218684234958],
                  [114.4746208190918, 30.492541778421224],
                  [114.48831081390381, 30.495869916725766],
                  [114.4850492477417, 30.501157724532117],
                  [114.4731616973877, 30.495906895400726],
                  [114.46929931640624, 30.50149051400995],
                  [114.46513652801514, 30.499013053917555],
                  [114.45827007293701, 30.499087008863864],
                  [114.45548057556151, 30.50219306583497],
                  [114.4525623321533, 30.50208213693682],
                ],
              ],
            },
          },
          {
            type: "Feature",
            geometry: {
              type: "Polygon",
              coordinates: [
                [
                  [114.44432258605956, 30.47160887744136],
                  [114.47547912597656, 30.473680177837977],
                  [114.47556495666502, 30.459993984147115],
                  [114.48367595672607, 30.458995186618672],
                  [114.48462009429932, 30.450338512476595],
                  [114.49998378753662, 30.450375508446697],
                  [114.52873706817627, 30.459143157268997],
                  [114.52869415283203, 30.472348632640834],
                  [114.51736450195312, 30.47157188953386],
                  [114.51513290405273, 30.478562354439717],
                  [114.52187061309814, 30.478895221201924],
                  [114.52290058135985, 30.494353778950128],
                  [114.52092647552489, 30.50152749054829],
                  [114.50783729553223, 30.49657250914657],
                  [114.49740886688232, 30.495389192672096],
                  [114.4881820678711, 30.495906895400726],
                  [114.47457790374754, 30.49261573828709],
                  [114.47573661804199, 30.48218684234958],
                  [114.45526599884033, 30.4874014300176],
                  [114.45153236389159, 30.487734266553137],
                  [114.45148944854736, 30.479154116785644],
                  [114.44432258605956, 30.47160887744136],
                ],
              ],
            },
          },
          {
            type: "Feature",
            properties: {
              name: "中华科技园",
              areaId: 8,
            },
            geometry: {
              type: "Polygon",
              coordinates: [
                [
                  [114.46457862854004, 30.27159551512706],
                  [114.46372032165526, 30.27396755985618],
                  [114.46303367614745, 30.274301124048893],
                  [114.4654369354248, 30.28056450782511],
                  [114.46674585342407, 30.28057377288962],
                  [114.4669497013092, 30.28074980894903],
                  [114.46696043014526, 30.281759693923988],
                  [114.46723937988281, 30.282528681934327],
                  [114.46919202804565, 30.282760303647986],
                  [114.4714879989624, 30.281768958875652],
                  [114.47124123573303, 30.28101849495716],
                  [114.47221755981445, 30.280499652349082],
                  [114.47275400161743, 30.279508284737084],
                  [114.47575807571411, 30.279258124972102],
                  [114.4764769077301, 30.279517549901314],
                  [114.4764769077301, 30.28301045448459],
                  [114.47473883628844, 30.286271621849316],
                  [114.47473883628844, 30.2867626405003],
                  [114.47548985481262, 30.287772463586194],
                  [114.4769811630249, 30.287772463586194],
                  [114.47777777910233, 30.288293583818742],
                  [114.47823643684387, 30.288773011987672],
                  [114.4782444834709, 30.290755549970964],
                  [114.47899550199509, 30.291756067944736],
                  [114.47924494743347, 30.293256825769117],
                  [114.47999596595763, 30.2927496277771],
                  [114.48024272918701, 30.29076018202213],
                  [114.48050022125243, 30.290505418882855],
                  [114.48049753904341, 30.289504888151903],
                  [114.47975188493729, 30.288008705101298],
                  [114.47949707508087, 30.287255972801947],
                  [114.48024809360504, 30.287258288910184],
                  [114.48149800300598, 30.289009251093212],
                  [114.48174476623535, 30.289252437813445],
                  [114.48299735784529, 30.287255972801947],
                  [114.48399513959885, 30.28700583279004],
                  [114.48274791240692, 30.286255408927403],
                  [114.48274791240692, 30.284749911646788],
                  [114.48223829269409, 30.283992521972593],
                  [114.48174744844435, 30.28300350585884],
                  [114.48400050401688, 30.28150259116658],
                  [114.48424726724623, 30.280756757734366],
                  [114.48548913002014, 30.280256443932146],
                  [114.4862401485443, 30.280501968616804],
                  [114.4867417216301, 30.280504284884504],
                  [114.48724597692488, 30.281006913678866],
                  [114.4869938492775, 30.28150722365465],
                  [114.48749274015427, 30.2822530513826],
                  [114.48799163103102, 30.28175274520967],
                  [114.48775023221968, 30.28099764865527],
                  [114.48774755001068, 30.280504284884504],
                  [114.48700457811354, 30.280003969795025],
                  [114.48675781488419, 30.279758443864328],
                  [114.4872486591339, 30.279508284737084],
                  [114.4874981045723, 30.27975612757902],
                  [114.48849320411682, 30.27975612757902],
                  [114.48849320411682, 30.28150490741064],
                  [114.48924422264099, 30.283005822067484],
                  [114.48923885822296, 30.283506121851016],
                  [114.48824644088745, 30.28376090316782],
                  [114.48849588632582, 30.28500237357221],
                  [114.48774755001068, 30.285507295474133],
                  [114.48951244354248, 30.28629015089962],
                  [114.49022054672241, 30.286271621849316],
                  [114.49023127555847, 30.283501489457315],
                  [114.48925495147705, 30.28150953989861],
                  [114.48924422264099, 30.28099996491124],
                  [114.48999524116516, 30.278748538293065],
                  [114.49072480201721, 30.27803511249682],
                  [114.49371814727783, 30.279045025410053],
                  [114.4946837425232, 30.280805399217957],
                  [114.49496269226073, 30.28099069988698],
                  [114.49571371078491, 30.280545977693468],
                  [114.49743032455444, 30.2815280698483],
                  [114.49700117111206, 30.282009847311627],
                  [114.49773073196411, 30.283547813384498],
                  [114.4985032081604, 30.283325458334588],
                  [114.49923276901244, 30.284066639874624],
                  [114.50099229812622, 30.280027132586948],
                  [114.50045585632324, 30.279285920533027],
                  [114.50071334838867, 30.278822660156283],
                  [114.50185060501097, 30.279045025410053],
                  [114.5044469833374, 30.27730315077012],
                  [114.50569152832031, 30.27732168151411],
                  [114.50618505477905, 30.28104629001945],
                  [114.50496196746826, 30.282009847311627],
                  [114.50519800186157, 30.28377016793051],
                  [114.5050048828125, 30.28401105145334],
                  [114.50496196746826, 30.28528957717454],
                  [114.50519800186157, 30.285789865312687],
                  [114.50575590133667, 30.285308106410337],
                  [114.50620651245117, 30.285308106410337],
                  [114.50646400451659, 30.28629015089962],
                  [114.50820207595825, 30.287772463586194],
                  [114.5097255706787, 30.28801333728218],
                  [114.50976848602294, 30.287309243277644],
                  [114.50906038284302, 30.286808962887662],
                  [114.50976848602294, 30.286512499230472],
                  [114.50925350189209, 30.285771336167883],
                  [114.50897455215454, 30.284752227814185],
                  [114.5097255706787, 30.283788697453268],
                  [114.51021909713745, 30.281268650234406],
                  [114.51395273208618, 30.279545345388755],
                  [114.51373815536499, 30.278044377800153],
                  [114.51279401779175, 30.277266089271684],
                  [114.51275110244751, 30.275033108165147],
                  [114.51422095298766, 30.27500531139968],
                  [114.51373815536499, 30.27378224592595],
                  [114.51424241065979, 30.274013888284053],
                  [114.5144784450531, 30.273754448806223],
                  [114.51426386833191, 30.271771567291093],
                  [114.51645255088806, 30.27153065372385],
                  [114.51897382736205, 30.272271924349184],
                  [114.51947808265685, 30.272271924349184],
                  [114.51999306678772, 30.27203101200997],
                  [114.52049732208252, 30.27203101200997],
                  [114.52124834060668, 30.27226265850091],
                  [114.52248215675354, 30.27153991964123],
                  [114.52298641204834, 30.27024268269982],
                  [114.52322244644164, 30.270020297502878],
                  [114.52372670173644, 30.2697608474697],
                  [114.52574372291565, 30.2697608474697],
                  [114.52648401260376, 30.27076157953353],
                  [114.52624797821045, 30.27153065372385],
                  [114.52648401260376, 30.272021746138943],
                  [114.52825427055359, 30.272522101921787],
                  [114.53028202056885, 30.27434745231934],
                  [114.53119397163391, 30.27502384257755],
                  [114.52950954437254, 30.275996724500757],
                  [114.52873706817627, 30.27399535691553],
                  [114.52724575996399, 30.27373591738872],
                  [114.52676296234131, 30.273281896566708],
                  [114.5264732837677, 30.272763013055727],
                  [114.52595829963684, 30.27301318937667],
                  [114.52449917793274, 30.27302245515408],
                  [114.52422022819519, 30.27473660892773],
                  [114.52323317527771, 30.274245530095484],
                  [114.52121615409851, 30.275792883372603],
                  [114.52022910118103, 30.277025189190528],
                  [114.52147364616394, 30.27777568364863],
                  [114.52222466468811, 30.277766418319956],
                  [114.52247142791748, 30.277525519466977],
                  [114.52397346496582, 30.27926739015997],
                  [114.52449917793274, 30.279026494991495],
                  [114.52700972557066, 30.281055555038467],
                  [114.52768564224243, 30.281768958875652],
                  [114.52824354171753, 30.281768958875652],
                  [114.52898383140563, 30.280777604087426],
                  [114.5294988155365, 30.280777604087426],
                  [114.53036785125732, 30.28161145457852],
                  [114.53100085258484, 30.28177822382643],
                  [114.53196644783019, 30.281518804873887],
                  [114.53248143196106, 30.28226926496592],
                  [114.5314836502075, 30.283251339872628],
                  [114.53070044517517, 30.28200058238271],
                  [114.52999234199523, 30.28150953989861],
                  [114.52924132347107, 30.28177822382643],
                  [114.52993869781494, 30.282778833361448],
                  [114.53048586845398, 30.28275103878993],
                  [114.53073263168335, 30.28351075424451],
                  [114.53073263168335, 30.284270463816537],
                  [114.53169822692871, 30.28427972853111],
                  [114.53221321105957, 30.28377943269231],
                  [114.53273892402649, 30.28477075715148],
                  [114.53373670578002, 30.284520610802915],
                  [114.53524947166441, 30.287531589298727],
                  [114.53693389892578, 30.28802260164328],
                  [114.53920841217041, 30.288272739062577],
                  [114.53872561454773, 30.289004618959353],
                  [114.53698754310608, 30.289264018118413],
                  [114.53648328781128, 30.289523416591514],
                  [114.53426241874693, 30.2892732823614],
                  [114.53373670578002, 30.289013883226843],
                  [114.53323245048523, 30.288272739062577],
                  [114.53248143196106, 30.288773011987672],
                  [114.53248143196106, 30.289291810844777],
                  [114.53222393989563, 30.28975502179143],
                  [114.53099012374878, 30.290014418966074],
                  [114.53021764755249, 30.2890324117592],
                  [114.52874779701233, 30.289523416591514],
                  [114.52749252319335, 30.29026455130628],
                  [114.5284903049469, 30.29076481407309],
                  [114.52971339225769, 30.290273815454764],
                  [114.53071117401123, 30.292006195843484],
                  [114.53099012374878, 30.29225632310437],
                  [114.52972412109375, 30.293275353499972],
                  [114.53022837638855, 30.294248054455323],
                  [114.5300030708313, 30.29474829690439],
                  [114.52797532081603, 30.295758037778036],
                  [114.52750325202942, 30.295507919447743],
                  [114.5269775390625, 30.2960174190764],
                  [114.52719211578368, 30.2962767996887],
                  [114.5269775390625, 30.29878719801819],
                  [114.52924132347107, 30.299759844302933],
                  [114.53020691871643, 30.299037307984364],
                  [114.53023910522461, 30.299778370805207],
                  [114.5304751396179, 30.30026005863529],
                  [114.53173041343689, 30.29876867132867],
                  [114.5341444015503, 30.298796461361665],
                  [114.53419804573059, 30.299769107554503],
                  [114.53446626663208, 30.299982162099035],
                  [114.53500270843506, 30.2997505810505],
                  [114.53500270843506, 30.299259627418703],
                  [114.53571081161498, 30.298286976172015],
                  [114.53620433807373, 30.29900951801961],
                  [114.53574299812317, 30.29950047290373],
                  [114.53622579574585, 30.300250795430106],
                  [114.53647255897522, 30.301492057126495],
                  [114.53770637512206, 30.300009951788095],
                  [114.53873634338379, 30.30001921501603],
                  [114.53898310661316, 30.2997505810505],
                  [114.53875780105591, 30.29826844938797],
                  [114.53898310661316, 30.29800907404371],
                  [114.53946590423584, 30.29777748833515],
                  [114.53999161720276, 30.29850929730757],
                  [114.54077482223511, 30.29851856067728],
                  [114.5400023460388, 30.296767768255034],
                  [114.53876852989197, 30.29552644675335],
                  [114.54073190689087, 30.295517183100976],
                  [114.54123616218567, 30.295248536801793],
                  [114.54102158546448, 30.294776088076738],
                  [114.54148292541504, 30.294266581998937],
                  [114.54504489898682, 30.298092444764883],
                  [114.54706192016602, 30.29560981958524],
                  [114.54998016357422, 30.294979889766676],
                  [114.56139564514159, 30.290199702242273],
                  [114.56388473510742, 30.290533211257475],
                  [114.56517219543457, 30.291607843703723],
                  [114.56671714782715, 30.291163169636707],
                  [114.56809043884277, 30.291904291961735],
                  [114.57032203674316, 30.291756067944736],
                  [114.57105159759521, 30.292960381599134],
                  [114.57440972328186, 30.292543505469148],
                  [114.57744598388672, 30.294544494733145],
                  [114.57920551300049, 30.29431290084265],
                  [114.57908749580383, 30.292756575712513],
                  [114.58019256591797, 30.292673200455003],
                  [114.58379745483398, 30.29775896145485],
                  [114.5822525024414, 30.299722791287927],
                  [114.58667278289794, 30.325360129400863],
                  [114.59049224853516, 30.345917019716573],
                  [114.58139419555664, 30.361470715911796],
                  [114.58671569824217, 30.411077878267125],
                  [114.58345413208008, 30.412706343030358],
                  [114.58122253417969, 30.43209778933758],
                  [114.5741844177246, 30.43372590331772],
                  [114.57435607910156, 30.41374262464341],
                  [114.55169677734375, 30.420996287860056],
                  [114.55015182495117, 30.427213284329845],
                  [114.54706192016602, 30.423216689219416],
                  [114.53744888305664, 30.430913689372137],
                  [114.53933715820311, 30.435353990118514],
                  [114.50174331665039, 30.42010811316847],
                  [114.49693679809569, 30.426473186476493],
                  [114.48440551757811, 30.41699943808526],
                  [114.46672439575195, 30.412410260548704],
                  [114.45346355438232, 30.413372525330324],
                  [114.43861484527588, 30.402565006671665],
                  [114.43728446960449, 30.380613179559663],
                  [114.432692527771, 30.350361185215682],
                  [114.46457862854004, 30.27159551512706],
                ],
              ],
            },
          },
          {
            type: "Feature",
            properties: {
              name: "综保区",
              areaId: 5,
              cp: [114.49046, 30.443834],
              interName: "张三",
            },
            geometry: {
              type: "Polygon",
              coordinates: [
                [
                  [114.47565078735352, 30.45030151649247],
                  [114.47565078735352, 30.433244872470567],
                  [114.4786548614502, 30.42854544631636],
                  [114.45367813110352, 30.41374262464341],
                  [114.46681022644043, 30.412521291584586],
                  [114.48440551757811, 30.417073455309502],
                  [114.49745178222656, 30.427028260392895],
                  [114.4910144805908, 30.434724959803816],
                  [114.50800895690918, 30.442643045463875],
                  [114.50539112091064, 30.452040312565796],
                  [114.50015544891357, 30.45041250440273],
                  [114.47565078735352, 30.45030151649247],
                ],
              ],
            },
          },
          {
            type: "Feature",
            properties: {
              name: "服务业园",
              areaId: 1,
              cp: [114.48971, 30.527844],

              interName: "李四",
            },
            geometry: {
              type: "Polygon",
              coordinates: [
                [
                  [114.46560859680176, 30.511621559726336],
                  [114.4666814804077, 30.511473668840708],
                  [114.46985721588135, 30.50870067308258],
                  [114.47530746459961, 30.507776323588814],
                  [114.49419021606445, 30.5133592607814],
                  [114.49625015258788, 30.51613212366921],
                  [114.4960355758667, 30.51846126737041],
                  [114.49780583381653, 30.519847635932763],
                  [114.50274109840393, 30.520614751372122],
                  [114.50603485107422, 30.52204730013766],
                  [114.5171070098877, 30.521751549864177],
                  [114.52011108398438, 30.520938231971368],
                  [114.52096939086914, 30.52707491707805],
                  [114.52517509460449, 30.52892324026129],
                  [114.52423095703124, 30.53136297302277],
                  [114.49822425842284, 30.53639010793045],
                  [114.47256088256836, 30.538607878854556],
                  [114.4705867767334, 30.527518517848744],
                  [114.46723937988281, 30.519163696580108],
                  [114.46560859680176, 30.511621559726336],
                ],
              ],
            },
          },
          {
            type: "Feature",
            properties: {
              name: "未来城",
              areaId: 7,
              cp: [114.575709, 30.496561],
              interName: "王五",
            },
            geometry: {
              type: "Polygon",
              coordinates: [
                [
                  [114.53633308410645, 30.532028344051604],
                  [114.5341444015503, 30.51912672674826],
                  [114.53225612640381, 30.518830967587267],
                  [114.53581809997559, 30.5106602649485],
                  [114.53530311584473, 30.5099947476115],
                  [114.53603267669676, 30.50851580388679],
                  [114.52088356018066, 30.501601443582857],
                  [114.52298641204834, 30.494427737438585],
                  [114.52260017395018, 30.49117351076242],
                  [114.54680442810059, 30.491543314729732],
                  [114.56912040710449, 30.46469189442102],
                  [114.56624507904053, 30.460289922189094],
                  [114.54586029052734, 30.452669231165242],
                  [114.5374059677124, 30.43098769604111],
                  [114.54714775085449, 30.42332770796098],
                  [114.55015182495117, 30.42717627957052],
                  [114.55165386199951, 30.421144316189334],
                  [114.57422733306883, 30.413779634497526],
                  [114.57401275634766, 30.433836910099355],
                  [114.58122253417969, 30.432171795108136],
                  [114.58027839660645, 30.462805359250176],
                  [114.59598541259766, 30.460289922189094],
                  [114.60536241531373, 30.45969804520618],
                  [114.61109161376953, 30.456812593422576],
                  [114.6181297302246, 30.456812593422576],
                  [114.61701393127441, 30.46576461381154],
                  [114.62012529373169, 30.471238997734226],
                  [114.6243953704834, 30.47221917588659],
                  [114.6306610107422, 30.472570558104827],
                  [114.63387966156004, 30.477360326100523],
                  [114.63568210601805, 30.478303457282234],
                  [114.63608980178832, 30.48002326120967],
                  [114.63151931762695, 30.486957646199492],
                  [114.62900876998903, 30.488714278630525],
                  [114.62834358215332, 30.490766724775042],
                  [114.59845304489136, 30.488640315799184],
                  [114.5976161956787, 30.497238118338267],
                  [114.5935821533203, 30.508478830005462],
                  [114.58078265190125, 30.514902830881926],
                  [114.58104014396667, 30.516566531688614],
                  [114.58688735961914, 30.52700098341937],
                  [114.59006309509277, 30.525891971788326],
                  [114.58757400512695, 30.528849308009075],
                  [114.58834648132323, 30.532693710523137],
                  [114.56302642822264, 30.53387657299763],
                  [114.55384254455565, 30.54163875054966],
                  [114.53916549682617, 30.538533953972987],
                  [114.53633308410645, 30.532028344051604],
                ],
              ],
            },
          },
        ],
      };
      this.initComponent(this.curGeoJsonData);
      // if (res.code == 200 && res.content) {
      //   this.getGridEchart(res.content.list);
      // } else {
      //   this.$message({
      //     message: "暂无网格",
      //     type: "warning",
      //   });
      // }
      // });
    },
    initComponent() {
      if (!this.curGeoJsonData.features.length) return;
      let polygonArr = [];
      //添加区域描边
      this.curGeoJsonData.features.map((item,i) => {
        polygonArr.push(this.createPolygon(item.geometry.coordinates[0], item,i));
        if (item.properties) {
          this.createMapText(item.properties, item);
        }
      });
      console.log(777);

      this.map.add(polygonArr);
      this.map.setFitView();
    },
    /** 区域描边
     * path
     * item 为额外参数
     */
    createPolygon(path, item,i) {
      // debugger
      let polygon = new AMap.Polygon({
        path: path,
        map: this.map,
        lineJoin: "round",
        lineCap: "round",
        strokeColor: this.strokeColor, //线颜色
        strokeOpacity: 1, //线透明度
        strokeWeight: 2, //线宽
        fillColor:  ColorMaker.GetColor(i).Color , //填充色
        fillOpacity: this.fillOpacity, //填充透明度
      });
      let _this = this;
      // 添加区域点击事件
      polygon.on("click", function (e) {
        _this.handleClickPolygon(e, item);
      });
      polygon.on("mouseover", () => {
        polygon.setOptions({
          fillOpacity: 0.7,
          fillColor: "#7bccc4",
        });
      });
      polygon.on("mouseout", () => {
        polygon.setOptions({
          fillOpacity: 0.5,
          fillColor: ColorMaker.GetColor(i).Color , //填充色,
        });
      });
      return polygon;
    },
    // 描边区域点击事件
    handleClickPolygon(e, item) {
      document.getElementById("lnglat").value =
        e.lnglat.getLng() + "," + e.lnglat.getLat();
      console.log(e.lnglat.getLng() + "," + e.lnglat.getLat());
      console.log("描边区域点击事件", e, item);
      //信息窗体的内容
      var content = [
        `<div><b></b>`,
        `村名/社区名 : ${item.properties.name}`,
        `网格员 : ${item.properties.interName}</div>`,
      ];

      //创建 infoWindow 实例
      var infoWindow = new AMap.InfoWindow({
        content: content.join("<br>"), //传入字符串拼接的 DOM 元素
        anchor: "top-left",
      });

      //打开信息窗体
      infoWindow.open(this.map, [e.lnglat.getLng(), e.lnglat.getLat()]); //map 为当前地图的实例，map.getCenter() 用于获取地图中心点坐标。
    },
    // 设置区域标点
    createMapText(properties, item) {
      // let maker = new AMap.Marker({
      //   position: properties.cp,
      //   content: properties.name, // 这里传入dom
      //   offset: new AMap.Pixel(0, 0),
      // });
      // this.map.add(maker);

      new AMap.Text({
        text: properties.name,
        anchor: "center", // 设置文本标记锚点
        draggable: false,
        cursor: "pointer",
        // angle: 10,
        style: {
          background: "transparent",
          "border-width": 0,
          "text-align": "center",
          "font-size": "16px",
          "font-weight": "bold",
          color: "#ffffff",
        },
        position: properties.cp,
      }).setMap(this.map);
    },
  },
};
</script>
<style lang="less" scoped>
#container {
  width: 100%;
  height: 800px;
}
.input-card {
  display: flex;
  flex-direction: column;
  min-width: 0;
  word-wrap: break-word;
  background-color: #fff;
  background-clip: border-box;
  border-radius: 0.25rem;
  width: 22rem;
  border-width: 0;
  border-radius: 0.4rem;
  box-shadow: 0 2px 6px 0 rgba(114, 124, 245, 0.5);
  position: absolute;
  bottom: 1rem;
  right: 1rem;
  -ms-flex: 1 1 auto;
  flex: 1 1 auto;
  padding: 0.75rem 1.25rem;
  z-index: 99;
  position: absolute;
  display: -ms-flexbox;
  display: flex;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
  -ms-flex-align: center;
  align-items: center;
  justify-content: center;
  width: 300px;
  height: 3rem;
  .input-item {
    position: relative;
    display: -ms-flexbox;
    display: flex;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
    -ms-flex-align: center;
    align-items: center;
    width: 100%;
    height: 3rem;
  }
}
</style>
